var path=require("path");var py_exec_path=path.join(process.env.APPDIR,"node_modules","speedtest","scripts","speedtest.py");var{spawn}=require("child_process");module.exports=async()=>{return new Promise((resolve,reject)=>{let result;var args=[py_exec_path,"--list"];var{stdout}=spawn("python",args);stdout.on("data",d=>{d=d||"";result+=d.toString()});function formatResult(r){let fresult=[];for(let s of r.split("\n")){try{let id=s.match(/(\d+)\)/i)[1];let name=s.replace(id+")","").trim();fresult.push({id:id,name:name})}catch(e){}}return fresult}function onDone(d){resolve(formatResult(result))}stdout.on("close",onDone);stdout.on("end",onDone);stdout.on("exit",onDone)})};